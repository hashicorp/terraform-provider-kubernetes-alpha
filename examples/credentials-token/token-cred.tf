# Example demonstrates authentication to the Kubernetes API via a service account token.
#
# After creating a service account, the token is available in a Secret resource associated to the service account.
# The secret also includes the cluster certificate authority required to securely access the API.
# Retrieve the token and CA from the Secret and paste them into the attributes below.
#
provider "kubernetes-alpha" {
  host = "https://192.168.64.51:8443"
  cluster_ca_certificate = base64decode("LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwdGFXNXAKYTNWaVpVTkJNQjRYRFRJd01ETXhOekV6TWpFek0xb1hEVE13TURNeE5qRXpNakV6TTFvd0ZURVRNQkVHQTFVRQpBeE1LYldsdWFXdDFZbVZEUVRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT0crCm5qem5EWGNwQi9GMUtreWE0K2pKY1VKRWU2UlpWVys1WFo2OS9IQmRqSFVUdkNZbGlJQXovYU1DV3ByUjBlUmgKR0tPQStoOU5lQ0hwUWNBTWhtcy9ZRlBNeXE2bCtPMS9jcjNHM3lvT3NJQnFtOFBQZnNpZ1NNU1czTmNMMlk0egpsYWJDbW1TUDhLclpZS1hmSjE1djVvLzBMYS9wSDd0Wm5GbVFnOENVK09ybWxUYWdjaXFBbnVPOElDMTBSYXgwClZNcUk5eWE0U2NKaHoxdXZoRlhTc1Q4NFovaHIyNXVTMFRVQjV3ejJvaENlTGZMeW5ocWY3aTF4d0t2dkVIRzEKQWQ4ek9weW1vV2ptREhYek1GbmpQV2pFSm00Wm9qTjhYc2dqTDVrSVE0cm1ab0srQjV6QW1XL1JWd3I5dm5FeQp2K01mZXpCeEk4WFJqSncxbHljQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXCk1CUUdDQ3NHQVFVRkJ3TUNCZ2dyQmdFRkJRY0RBVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFBcmxLcERxMjhkWUpNQ2I3cFEvZktjd1FUR0o2MEdiUVpUa3k3U1FPSGpWRkFHczNVVAo3RnRCcVl4bk1CVFY3TXhXS01IaG1rR0YyZVBlbVNjVTFVOVkwR2hPVWJVVmxRVHhDUklVeSt5cjZkQVdYSEk0CjQyYnBQVVU4UDIvUlRDWWV5ZzNKWG1KaWkrMDRZajVmRHZMRnFRSHhpbnpxNDFoYlk2SlpVUnR0OXRmMDNkNWUKd25FNGhEOHdmVzE5ZW5TTGFERE01N2RpWWV2SWI3ZzdHcTc4RnBldTlYWWNiM3VJK3g5bVhFWDYxZDA3S1ZSZgpCYlZaa2pZemk0enI0eHZXbUZQTmMyekorZXJwVTMweDdiLzk4eGt6TkRJcTNNekVJeGQyWUNPSnMrZ1kwNk5aCnNGa2xtNStMTTU3NTU1dWVVc2FnMnBrWjdBTXlKQjFmRXFHdwotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==")
  token = base64decode("ZXlKaGJHY2lPaUpTVXpJMU5pSXNJbXRwWkNJNkluSTVURzQxYmt0V1MyVkdWa3h6TkRGNmVrZDZYM0ZPTVhWb1gza3lNbFpXY1cxWFkxWlJkRkJ6UkhjaWZRLmV5SnBjM01pT2lKcmRXSmxjbTVsZEdWekwzTmxjblpwWTJWaFkyTnZkVzUwSWl3aWEzVmlaWEp1WlhSbGN5NXBieTl6WlhKMmFXTmxZV05qYjNWdWRDOXVZVzFsYzNCaFkyVWlPaUprWldaaGRXeDBJaXdpYTNWaVpYSnVaWFJsY3k1cGJ5OXpaWEoyYVdObFlXTmpiM1Z1ZEM5elpXTnlaWFF1Ym1GdFpTSTZJblJsY25KaFptOXliUzEwYjJ0bGJpMDBhM2RxYWlJc0ltdDFZbVZ5Ym1WMFpYTXVhVzh2YzJWeWRtbGpaV0ZqWTI5MWJuUXZjMlZ5ZG1salpTMWhZMk52ZFc1MExtNWhiV1VpT2lKMFpYSnlZV1p2Y20waUxDSnJkV0psY201bGRHVnpMbWx2TDNObGNuWnBZMlZoWTJOdmRXNTBMM05sY25acFkyVXRZV05qYjNWdWRDNTFhV1FpT2lJMU5EQXdNV1JrWkMxbFltRTVMVFJtWWpjdFlqWTVaUzFoWTJVek1USTFZamswTVRFaUxDSnpkV0lpT2lKemVYTjBaVzA2YzJWeWRtbGpaV0ZqWTI5MWJuUTZaR1ZtWVhWc2REcDBaWEp5WVdadmNtMGlmUS5ZeXNZbUY1dGgycUx4aGFrWjFuUXcyRzBwbzgzdGJzbm5aemYtaWNLbGhLekQ2NkI3djRrUzZsXzlTa2xhQVRFQUxnVy0waVZqWElZSWJZd1JjdVl0X1ctRXJMSG1DOGlBYUVia3ZvcEdSczJ0TS1iQ0pKSk1kX0ktQWNsNUVVYS1sWWR3YUJFNGRoZ2cyWEpaYTFRU0hoNzQ5QmlNTlVNMS1CRVJkT19sUUNCMHNhWkRGUjhLeTlGOUhHb1RoTk12eXpZb2U2d3ZCbWM4WEJvNHFFbmNhaVFwbGhPX2tkYjZsWVl0aS03b2VmY3Z1djhEN3Vuc05FdHYwUDM5VWtfNW05ZnJaSE5iTC1kbUJTdUZYeUdlLTBNZDQzVFFESlQxUV9IRDBFWEZ5OU93dlk3cE5ESmZtZnJpOG9Zc3ppWGc4MlBiUzROa1VEVGNsMWJhdWpFZnc=")
}

# Example resource
resource "kubernetes_manifest" "test-namespace" {
  provider = kubernetes-alpha

  manifest = {
    "apiVersion" = "v1"
    "kind"       = "Namespace"
    "metadata" = {
      "name" = "tf-demo"
    }
  }
}